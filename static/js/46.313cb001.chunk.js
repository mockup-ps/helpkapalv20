(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[46],{635:function(e,t,s){"use strict";var n=s(658),c=Object(n.a)("https://ctvjpxocqeajngziaxji.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYyMzE4Mjc3OSwiZXhwIjoxOTM4NzU4Nzc5fQ.pCQD8_U0cgWJtgLbOh90kUGpxpOmpwzDmsfwKzj7PwE");t.a=c},751:function(e,t,s){"use strict";s.r(t);var n=s(634),c=s.n(n),a=s(167),i=s(43),r=s(636),l=s(649),j=s(630),d=s(628),u=s(1),b=s(162),o=s(635),f=s(19),O=s(20),x=function(){return Object(O.jsx)("div",{className:"d-flex flex-row justify-content-center",children:Object(O.jsx)("div",{className:"mr-2",children:Object(O.jsx)(d.f,{className:"btn btn-sm btn-success",children:Object(O.jsx)("i",{class:"fas fa-eye"})})})})},h=function(e){var t=Object(f.g)(),s=Object(b.b)();return Object(O.jsxs)("div",{className:"d-flex flex-row justify-content-center",children:[Object(O.jsx)("div",{className:"mr-2",children:Object(O.jsx)(d.f,{className:"btn btn-sm btn-success",children:Object(O.jsx)("i",{class:"fas fa-eye"})})}),Object(O.jsx)("div",{children:Object(O.jsx)(d.f,{onClick:function(){return t.push("/hdpsc/edit"),void s({type:"set",datadetensi:e.datadetensi})},className:"btn btn-sm btn-info",children:Object(O.jsx)("i",{class:"fas fa-wrench"})})})]})},m=function(e){var t=Object(f.g)(),s=Object(b.b)();return Object(O.jsxs)("div",{className:"d-flex flex-row justify-content-center",children:[Object(O.jsx)("div",{className:"mr-2",children:Object(O.jsx)(d.f,{className:"btn btn-sm btn-success",children:Object(O.jsx)("i",{class:"fas fa-eye"})})}),Object(O.jsx)("div",{children:Object(O.jsx)(d.f,{onClick:function(){return t.push("/hdpsc/edit"),void s({type:"set",datadetensi:e.datadetensi})},className:"btn btn-sm btn-warning",children:Object(O.jsx)("i",{class:"fas fa-pencil-alt"})})})]})};t.default=function(){Object(b.b)();var e=Object(f.g)(),t=Object(u.useState)([]),s=Object(j.a)(t,2),n=s[0],p=s[1],k=Object(u.useState)([]),_=Object(j.a)(k,2),v=_[0],y=_[1],g=["success","primary","warning","info"],w=Object(b.c)((function(e){return e.simView}));return Object(u.useEffect)(Object(r.a)(c.a.mark((function e(){var t,s,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.from("td_detensi").select("\n            id_detensi,\n            data,\n            tr_status (\n                kd_status,\n                ur_status\n            ),\n            th_detensi (\n                kd_status,\n                created_at\n            )\n        ");case 2:return t=e.sent,e.next=5,o.a.from("tr_status").select("\n            kd_status,\n            ur_status\n        ");case 5:s=e.sent,n=t.data.map((function(e){return Object(i.a)(Object(i.a)(Object(i.a)(Object(a.a)({},"id_detensi",e.id_detensi),e.data),e.tr_status),{},Object(a.a)({},"histori",e.th_detensi))})),p(n),console.log(s);case 9:case"end":return e.stop()}}),e)}))),[]),Object(O.jsxs)(d.j,{children:[Object(O.jsx)(d.n,{children:Object(O.jsx)("h5",{children:"Data Detensi Kapal"})}),Object(O.jsxs)(d.k,{children:[1==w?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:"d-flex justify-content-end mb-2",children:Object(O.jsxs)(d.f,{onClick:function(){return e.push("/hdpsc/new")},className:"btn btn-info",children:["Buat Baru ",Object(O.jsx)("i",{class:"fas fa-plus"})]})})}):Object(O.jsx)(O.Fragment,{}),Object(O.jsx)(d.y,{addTableClasses:"josss",items:n,fields:[{key:"no",label:"No",_style:{width:"5%"}},{key:"namakapal",label:"Nama Kapal"},{key:"imokapal",label:"Nomor IMO Kapal"},{key:"tgldetensi",label:"Tanggal Detensi"},{key:"status",label:"Status"},{key:"action",label:"Action"}],scopedSlots:{no:function(e,t){return Object(O.jsx)("td",{children:t+1})},status:function(e,t){return Object(O.jsx)("td",{children:Object(O.jsx)(d.b,{onClick:function(){!function(e){var t=v.indexOf(e),s=v.slice();-1!==t?s.splice(t,1):s=[].concat(Object(l.a)(v),[e]),y(s)}(t)},role:"button",color:g[parseInt(e.kd_status)-1],children:e.ur_status})})},action:function(e,t){return Object(O.jsx)("td",{children:1==w?Object(O.jsx)(x,{}):2==w&&1==e.kd_status||3==w&&2==e.kd_status?Object(O.jsx)(m,{datadetensi:e}):3==w&&3==e.kd_status?Object(O.jsx)(h,{datadetensi:e}):Object(O.jsx)(x,{})})},details:function(e,t){return Object(O.jsx)(d.v,{show:v.includes(t),children:e.histori.map((function(e){var t=new Date(e.created_at),s=t.getDate(),n=t.getMonth()+1,c=t.getFullYear(),a=t.getHours(),i=t.getMinutes(),r=t.getSeconds();return Object(O.jsxs)("div",{className:"d-flex flex-row justify-content-end mx-3 my-3",children:[Object(O.jsx)("div",{className:"d-flex flex-column justify-content-center mr-2",children:Object(O.jsx)(d.b,{color:g[parseInt(e.kd_status)-1],children:1==e.kd_status?"Pemberitahuan oleh Dit. KPLP":2==e.kd_status?"Penerusan Informasi oleh Dit. KAPEL":3==e.kd_status?"Input Data oleh BKI":4==e.kd_status?"Input CAP oleh BKI":""})}),Object(O.jsxs)("div",{style:{minWidth:"15vw"},className:"d-flex flex-column",children:[1==s.toString().length?"0"+s:s,"-",1==n.toString().length?"0"+n:n,"-",c," ",a,":",i,":",r]})]})}))})}}})]})]})}}}]);
//# sourceMappingURL=46.313cb001.chunk.js.map